!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class i{constructor(e,t){this.domElement=document.querySelector("#"+e),this.isInSyncMode=!1,this.playbackSettings=t,this.playerOptions={width:this.domElement.offsetWidth,height:this.domElement.offsetHeight,controls:!1},t.video&&(this.playerOptions.video=t.video),t.channel&&(this.playerOptions.channel=t.channel),this.player=new Twitch.Player(e,this.playerOptions),this.registerListeners(),this.sync(!1)}setSize(){this.player.setWidth(this.domElement.offsetWidth),this.player.setHeight(this.domElement.offsetHeight)}registerListeners(){this.player.addEventListener(Twitch.Player.READY,()=>{}),this.player.addEventListener(Twitch.Player.PLAYING,()=>{this.playbackSettings.timestamp&&this.player.seek(this.playbackSettings.timestamp),document.querySelector("#caster-volume").value=100*this.player.getVolume(),this.hideLoader(),this.populateQualitySettings()}),this.player.addEventListener(Twitch.Player.PLAYBACK_BLOCKED,()=>{console.log("PLAYBACK_BLOCKED")}),document.querySelector("#caster-volume").addEventListener("input",e=>{this.player.setVolume(e.srcElement.value/100),this.player.setMuted(!1)}),document.querySelector("#mobile-caster-volume").addEventListener("input",e=>{this.player.setVolume(e.srcElement.value/100),this.player.setMuted(!1)}),document.querySelector("#volume-toggle").addEventListener("click",()=>{document.querySelector("#mobile-volume-control").classList.toggle("toggled")}),window.addEventListener("resize",()=>{this.setSize()})}hideLoader(){this.domElement.classList.remove("is-loading")}populateQualitySettings(){let e=this.player.getQualities(),t=this.player.getQuality(),s="";e.forEach(e=>{t==e.group?s+=`<li class="active" data-setting="${e.group}">${e.name}</li>`:s+=`<li data-setting="${e.group}">${e.name}</li>`}),document.querySelector("#twitch-quality-options").innerHTML=s,document.querySelectorAll("#twitch-quality-options li").forEach(e=>{e.addEventListener("click",e=>{this.setQuality(e.srcElement.getAttribute("data-setting"),e.srcElement)})})}setQuality(e,t){document.querySelectorAll("#twitch-quality-options li").forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),this.player.setQuality(e)}sync(e){e?(this.isInSyncMode=!0,this.domElement.classList.add("timer-focus"),this.domElement.classList.remove("caster-focus")):(this.isInSyncMode=!1,this.domElement.classList.add("caster-focus"),this.domElement.classList.remove("timer-focus")),this.setSize()}}class n{constructor(e,t){this.domElement=document.querySelector("#"+e).parentElement,this.isInSyncMode=!1,this.playbackSettings=t,this.playerOptions={width:this.domElement.offsetWidth,height:this.domElement.offsetWidth*(9/16),videoId:t.video,events:{onReady:this.onPlayerReady,onStateChange:this.onPlayerStateChange}},this.player=new YT.Player(e,this.playerOptions),this.registerListeners()}togglePause(){this.player.getPlayerState()==YT.PlayerState.PAUSED?(this.player.playVideo(),document.querySelector("#game-control").classList.remove("paused")):(this.player.pauseVideo(),document.querySelector("#game-control").classList.add("paused"))}catchUpLive(){this.player.seekTo(this.player.getCurrentTime()+60),this.player.getPlayerState()==YT.PlayerState.PAUSED&&(this.player.playVideo(),document.querySelector("#game-control").classList.remove("paused"))}setSize(){this.player.setSize(this.domElement.offsetWidth,this.domElement.offsetWidth*(9/16))}registerListeners(){this.player.addEventListener("onReady",e=>{this.player.playVideo(),this.player.mute(),this.playbackSettings.timestamp&&this.player.seekTo(this.playbackSettings.timestamp)}),this.player.addEventListener("onStateChange",e=>{e.data==YT.PlayerState.PLAYING&&this.hideLoader()}),window.addEventListener("resize",()=>{this.setSize()})}hideLoader(){this.domElement.classList.remove("is-loading")}sync(e){e?(this.isInSyncMode=!0,this.domElement.classList.add("timer-focus"),this.domElement.classList.remove("game-focus")):(this.isInSyncMode=!0,this.domElement.classList.add("game-focus"),this.domElement.classList.remove("timer-focus")),this.setSize()}}class r{constructor(){this.matchSettings={video:window.location.hash.substring(1)},this.casterSettings={channel:"sardoche"},""==this.matchSettings.video&&(this.matchSettings={video:"r76KQmK2nLE",timestamp:"11747"},this.casterSettings={video:"499832186",timestamp:14666}),this.isMobile=/Mobi/i.test(navigator.userAgent),this.mainPlayer=new n("youtube-player",this.matchSettings),this.casterPlayer=new i("caster-view",this.casterSettings),this.registerListeners(),this.isMobile&&this.toggleFullscreen()}registerListeners(){document.querySelector("#sync").addEventListener("click",()=>{let e=!this.casterPlayer.isInSyncMode;this.casterPlayer.sync(e),this.mainPlayer.sync(e)}),document.querySelector("#game-control").addEventListener("click",()=>{this.mainPlayer.togglePause()}),document.querySelector("#game-reset-control").addEventListener("click",()=>{this.mainPlayer.catchUpLive()}),document.querySelector("#fullscreen").addEventListener("click",()=>{this.toggleFullscreen()}),document.querySelector("#open-settings").addEventListener("click",e=>{document.querySelector("#settings").classList.add("toggled")}),document.querySelector("#close-settings").addEventListener("click",e=>{document.querySelector("#settings").classList.remove("toggled")}),document.querySelector("#main-view .controls").addEventListener("touchend",e=>{e.srcElement==document.querySelector("#main-view .controls")&&document.querySelector("#main-view .controls").classList.toggle("visible"),document.querySelector("#main-view .controls").classList.contains("visible")||document.querySelector("#mobile-volume-control").classList.remove("toggled")}),document.querySelector("#live-chat-embed").addEventListener("load",e=>{document.querySelector("#live-chat").classList.remove("is-loading")})}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen().then(()=>{}):document.body.requestFullscreen().then(()=>{window.screen.orientation.lock("landscape").then(()=>{this.landscape=!0}).catch(e=>{this.landscape=!1})}).catch(e=>{})}}window.onYouTubeIframeAPIReady=()=>{(function e(){return new Promise(t=>{null!=window.Twitch?t():setTimeout(()=>{e().then(()=>{t()})},300)})})().then(()=>{new r})},(new class{constructor(){this.clientID="w7noco2018pomibp0cc07rhewamy6k",this.url="https://api.twitch.tv/helix/streams?user_login=sardoche",this.settings={headers:{"Client-ID":this.clientID}}}updateViewerCount(){fetch(this.url,this.settings).then(e=>{e.json().then(e=>{e.data.length>0&&(document.querySelector("#viewer-count").innerText=e.data[0].viewer_count),setTimeout(()=>{this.updateViewerCount()},3e5)})})}}).updateViewerCount()}]);